<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Hexo + Github pages搭建博客</title>
      <link href="/posts/b8f4bd70/"/>
      <url>/posts/b8f4bd70/</url>
      
        <content type="html"><![CDATA[<h1 id="1-博客部署"><a href="#1-博客部署" class="headerlink" title="1. 博客部署"></a>1. 博客部署</h1><h2 id="1-1-安装-hexo"><a href="#1-1-安装-hexo" class="headerlink" title="1.1. 安装 hexo"></a>1.1. 安装 hexo</h2><ul><li><p>官方文档：<a href="https://hexo.io/zh-cn/">Hexo-快速、简洁且高效的博客框架</a></p>  <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-cli -g</span><br><span class="line">hexo init blog</span><br><span class="line"><span class="built_in">cd</span> blog</span><br><span class="line">npm install</span><br><span class="line">hexo server</span><br></pre></td></tr></table></figure></li></ul><h2 id="1-2-一键部署到-github-pages"><a href="#1-2-一键部署到-github-pages" class="headerlink" title="1.2. 一键部署到 github pages"></a>1.2. 一键部署到 github pages</h2><ul><li><p>官方文档：<a href="https://hexo.io/zh-cn/docs/one-command-deployment#Git">hexo一键部署</a></p></li><li><p>在自己的github仓库中新建一个 <code>username.github.io</code> 仓库，这个仓库用于部署github pages</p></li><li><p>hexo目录下安装 <a href="https://github.com/hexojs/hexo-deployer-git">hexo-deployer-git</a></p> <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$ </span><span class="language-bash">npm install hexo-deployer-git --save</span></span><br></pre></td></tr></table></figure></li><li><p>在根目录下 <code>_config.yml</code> 文件添加以下配置</p>  <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">deploy:</span><br><span class="line">type: git</span><br><span class="line">repo: &lt;repository url&gt; #https://github.com/username/username.github.io</span><br><span class="line">branch: [branch]</span><br><span class="line">message: [message]</span><br></pre></td></tr></table></figure><table><thead><tr><th align="left">参数</th><th align="left">描述</th><th align="left">默认</th></tr></thead><tbody><tr><td align="left"><code>repo</code></td><td align="left">库（Repository）地址</td><td align="left"></td></tr><tr><td align="left"><code>branch</code></td><td align="left">分支名称</td><td align="left"><code>gh-pages</code> (GitHub) <code>coding-pages</code> (Coding.net) <code>master</code> (others)</td></tr><tr><td align="left"><code>message</code></td><td align="left">自定义提交信息</td><td align="left"><code>Site updated: &#123;&#123; now('YYYY-MM-DD HH:mm:ss') &#125;&#125;</code>)</td></tr></tbody></table></li><li><p>生成站点文件并推送至远程库, 执行 <code>hexo clean &amp;&amp; hexo deploy</code>。</p></li><li><p>登入 Github，在库设置（settings-&gt;pages）中将默认分支设置为<code>_config.yml</code>配置中的分支名称。稍等片刻，站点就会显示在Github Pages中。</p></li></ul><h2 id="1-3-绑定已备案的域名"><a href="#1-3-绑定已备案的域名" class="headerlink" title="1.3. 绑定已备案的域名"></a>1.3. 绑定已备案的域名</h2><ul><li><p>首先当然是购买一个域名，到阿里云，腾讯云等都可以购买，并且域名需要备案。</p></li><li><p>买好之后到域名的解析设置页面，点击<code>添加解析</code>按钮，分别添加一个<code>CNAME</code>类型解析和两个<code>A</code>类的解析。</p><table><thead><tr><th align="left">主机记录</th><th align="left">记录类型</th><th align="left">解析路线</th><th align="left">记录值</th><th align="right">TTL</th><th>状态</th></tr></thead><tbody><tr><td align="left">@</td><td align="left">A</td><td align="left">默认</td><td align="left">192.30.252.154</td><td align="right">10 分钟</td><td>正常</td></tr><tr><td align="left">@</td><td align="left">A</td><td align="left">默认</td><td align="left">192.30.252.153</td><td align="right">10 分钟</td><td>正常</td></tr><tr><td align="left">blog</td><td align="left">CNAME</td><td align="left">默认</td><td align="left">skylyyun.github.io</td><td align="right">10 分钟</td><td>正常</td></tr></tbody></table></li><li><p><code>CNAME</code>里的主机记录代表域名前缀, 如果你只想让某个二级域名跳转到你的博客页面，那就在这里设置二级域名，比如<code>www</code>或<code>blog</code>，我的域名为leiyiyun.com, 如上图就只会解析到我的<code>blog.leiyiyun.com</code>到博客页面。</p><p><code>A</code>类型解析主机记录选择<code>@</code>，记录值分别填写<code>192.30.252.153</code>和<code>192.30.252.154</code>，这两个是github提供的固定解析地址。</p></li><li><p>域名设置结束，需要添加 <code>CNAME</code> 文件，两种方式添加：</p><ol><li>在hexo目录中的<code>source</code>文件夹中新建<code>CNAME</code>文件，并在文件中写入设置好的解析地址，比如我应该写入<code>blog.leiyiyun.com</code>。</li><li>在github对应仓库的设置页面添加域名即可（settings-&gt;pages-&gt;custom domain）</li></ol></li><li><p>执行下面的命令将代码更新到远端仓库, 再访问 blog.leiyiyun.com 就可以看到博客已经部署成功了。</p> <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$ </span><span class="language-bash">hexo g</span></span><br><span class="line"><span class="meta">$ </span><span class="language-bash">hexo d</span></span><br></pre></td></tr></table></figure></li></ul><hr><h1 id="2-配置主题"><a href="#2-配置主题" class="headerlink" title="2. 配置主题"></a>2. 配置主题</h1><p>我先后用的主题分别是极简的next, 和现在很好看的butterfly,  所以这两个主题的问题都会有些记录。</p><h2 id="2-1-butterfly"><a href="#2-1-butterfly" class="headerlink" title="2.1 butterfly"></a>2.1 butterfly</h2><blockquote><p> <a href="https://butterfly.js.org/posts/21cfbf15/">butterfly</a>: 一款很好看的hexo主题<br>安装文档非常详细，强力推荐，绝大部分的设置和功能看这个安装文档都能解决。</p></blockquote><p>这里记录一下安装完成我对这个主题一些颜色字体大小等的修改，因为有些设置用户改不了，或者改的效果不对，这些设置我就直接在主题源文件改了。</p><ul><li><p>字体设置，<code>themes\butterfly\source\css\var.styl</code> 文件中将 <code>$dafault-font-family</code>  修改为思源字体的设置：</p>  <figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$dafault-<span class="attribute">font-family</span> = &#x27;Source Sans <span class="number">3</span>&#x27;, &#x27;Source Sans Pro&#x27;, &#x27;Noto Sans&#x27;, &#x27;Roboto&#x27;, ui-sans-serif, sans-serif, &#x27;Apple <span class="attribute">Color</span> Emoji&#x27;, &#x27;Segoe UI Emoji&#x27;, &#x27;Segoe UI Symbol&#x27;, &#x27;Noto <span class="attribute">Color</span> Emoji&#x27;, emoji;</span><br></pre></td></tr></table></figure></li><li><p>文章字体颜色修改 <code>themes\butterfly\source\css\var.styl</code></p>  <figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$<span class="attribute">font</span>-black =<span class="selector-id">#24292f</span></span><br></pre></td></tr></table></figure></li><li><p>文章字体大小修改  <code>themes\butterfly\source\css\_layout\post.styl</code> ,<br>在<code>article-container</code> 添加<code>font-size</code> </p>  <figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#article-container</span></span><br><span class="line">  <span class="attribute">word-wrap</span>: break-word</span><br><span class="line">  overflow-wrap: break-word</span><br><span class="line">  font-size: <span class="number">1.15em</span></span><br></pre></td></tr></table></figure></li><li><p>经过修改后，实现了我比较喜欢的显示效果，就是博客现在看起来的效果，如果我后面又改了当我没说 :)</p></li></ul><h2 id="2-2-Next"><a href="#2-2-Next" class="headerlink" title="2.2. Next"></a>2.2. Next</h2><blockquote><p><a href="https://github.com/next-theme/hexo-theme-next">Next</a>: 简约主题<br>这里记录以前遇到的问题</p></blockquote><h3 id="2-2-1-首页文章添加阴影-next"><a href="#2-2-1-首页文章添加阴影-next" class="headerlink" title="2.2.1. 首页文章添加阴影-next"></a>2.2.1. 首页文章添加阴影-next</h3><p>  V 7.7.1版本没有<code>blog\themes\next\source\css\_custom\custom.styl</code>文件，打开<code>next\source\css\_common\components\post</code>下的<code>post.styl</code>文件。</p><img src="https://cdn.leiyiyun.com/post-img/hb-hexo/hb-hexo-image6.png" style="zoom:50%;" /><p>  如上图，找到.post-block 并添加如下代码：</p>   <figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">// 主页文章添加阴影效果</span><br><span class="line"> <span class="selector-class">.post-block</span> &#123;</span><br><span class="line">   <span class="attribute">margin-top</span>: <span class="number">60px</span>;</span><br><span class="line">   <span class="attribute">margin-bottom</span>: <span class="number">60px</span>;</span><br><span class="line">   <span class="attribute">padding</span>: <span class="number">25px</span>;</span><br><span class="line">   -webkit-<span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span> <span class="built_in">rgba</span>(<span class="number">202</span>, <span class="number">203</span>, <span class="number">203</span>, .<span class="number">5</span>);</span><br><span class="line">   -moz-<span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span> <span class="built_in">rgba</span>(<span class="number">202</span>, <span class="number">203</span>, <span class="number">204</span>, .<span class="number">5</span>);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><p>  效果：</p><img src="https://cdn.leiyiyun.com/post-img/hb-hexo/hb-hexo-20200214100423922.png" style="zoom: 33%;" /><h1 id="3-图片设置"><a href="#3-图片设置" class="headerlink" title="3. 图片设置"></a>3. 图片设置</h1><p>图片插入我也用过两种方法 </p><ul><li><p>之前的博客是搭在服务器上，所以图片也传到了服务器上，相当于本地引用。   </p></li><li><p>使用七牛云等云服务引用图片。</p></li></ul><h2 id="3-1-本地引用时的图片显示问题"><a href="#3-1-本地引用时的图片显示问题" class="headerlink" title="3.1. 本地引用时的图片显示问题"></a>3.1. 本地引用时的图片显示问题</h2><ul><li><p>参照  <a href="https://yanyinhong.github.io/2017/05/02/How-to-insert-image-in-hexo-post/">Hexo博客搭建之在文章中插入图片</a>  这篇文章使用相对路径可以正常发图，但是后面发现因为我的博文生成的是永久链接，导致只能使用标签插件语法。</p></li><li><p>发图之后发现图片显示过大，欲调显示比例，标签插件语法（如下）：</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% asset_img image.<span class="property">jpg</span> <span class="title class_">This</span> is an image %&#125;</span><br></pre></td></tr></table></figure></li><li><p>尝试使用typora里面插入图片的语法（如下）：</p>  <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;/Users/lyy/Library/Application Support/typora-user-images/image-20200213233811415.png&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;image-20200213233811415&quot;</span> <span class="attr">style</span>=<span class="string">&quot;zoom: 50%;&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure><p>  根据相对路径的方法改为：</p>  <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">image-20200213233811415.png</span> <span class="attr">style</span>=<span class="string">&quot;zoom: 50%;&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure><p>  发到网站上发现查看图片链接地址：</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">http</span>:<span class="comment">//localhost:4000/archives/Hexo-Next%E9%85%8D%E7%BD%AE%E4%B8%AD%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/image-20200213233811415.png</span></span><br></pre></td></tr></table></figure><p>  Hexo-Next%E…B3这一段是我的同名文件夹的名称, 但是少了一段abbrlink对应的一段字符(如下图)</p>  <img src="https://cdn.leiyiyun.com/post-img/hb-hexo/hb-hexo-image2.png" style="zoom:50%;" /><p>  所以修改为：</p></li></ul><img src="https://cdn.leiyiyun.com/post-img/hb-hexo/hb-hexo-image1.png" style="zoom:50%;" /><ul><li>每次都要复制abbrlink比较麻烦, 可能是永久链接的锅，把站点配置文件的permalink:改回默认的:year&#x2F;:month&#x2F;:day&#x2F;:title&#x2F;，再用 <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">image-20200213233811415.png</span> <span class="attr">style</span>=<span class="string">&quot;zoom: 50%;&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure> 显示正常，网站图片链接路径正常，缩放也正常。</li></ul><h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><ul><li>不要用标签插件语法</li><li>相对路径有问题，可能是 <code>post_asset_folder</code> 的默认设置原因。</li></ul><h2 id="3-2-利用图床插入图片"><a href="#3-2-利用图床插入图片" class="headerlink" title="3.2 利用图床插入图片"></a>3.2 利用图床插入图片</h2><p>我现在使用的就是用七牛云图床插入图片， 配置为<code>typora + picGo + 七牛云</code>。<br>typora + picGo + 七牛云的配置具体可以参考下面几篇文章。</p><ul><li><a href="https://jiapeng.me/markdown-picbed/">七牛云 + 备案域名 + 免费 SSL + PicGo 搭建 Typora 图床</a></li><li><a href="https://www.jianshu.com/p/0997d0d15e55">如何用七牛和picGO设置免费图床</a></li><li><a href="https://sspai.com/post/63461">七牛云图床简易配置教程 | 以 MWeb 为例</a></li><li><a href="https://zhuanlan.zhihu.com/p/141610018">picgo使用七牛云图床</a></li></ul><p>进阶使用（在线处理图片等）可以参考下面这篇文章。</p><ul><li><a href="https://ishanshan.im/#/wr/HbMarkdownImage">这样用七牛，插图优雅又省心 · MarkDown 码字发文最佳实践</a></li></ul><p>而且用了图床之后可以直接使用typora的图片缩放写法。</p><h1 id="4-其他设置"><a href="#4-其他设置" class="headerlink" title="4. 其他设置"></a>4. 其他设置</h1><h2 id="4-1-启用RSS订阅"><a href="#4-1-启用RSS订阅" class="headerlink" title="4.1. 启用RSS订阅"></a>4.1. 启用RSS订阅</h2><p>  1.下载插件：<br>  <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-generator-feed --save</span><br></pre></td></tr></table></figure></p><p>  2.在站点配置文件_config.yml中添加：<br>  <figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">feed:</span><br><span class="line">  type: atom</span><br><span class="line">  path: atom.xml</span><br><span class="line">  limit: <span class="number">20</span></span><br><span class="line">  hub:</span><br><span class="line">  content:</span><br><span class="line">  content_limit: <span class="number">140</span></span><br><span class="line">  content_limit_delim: <span class="string">&#x27; &#x27;</span></span><br><span class="line">  order_by: -date</span><br><span class="line">  icon: icon.png</span><br><span class="line">  autodiscovery: true</span><br><span class="line">  template:</span><br></pre></td></tr></table></figure></p><p>  1.在主题配置文件_config.yml中修改：<br>  <figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Set rss to false to disable feed link.</span></span><br><span class="line"><span class="comment"># Leave rss as empty to use site&#x27;s feed link.</span></span><br><span class="line"><span class="comment"># Set rss to specific value if you have burned your feed already.</span></span><br><span class="line">rss: /atom.xml <span class="comment">//注意：有一个空格</span></span><br></pre></td></tr></table></figure></p><p><strong>相关阅读</strong> :</p><ul><li><a href="https://www.flikfill.com/848.html">带你走进RSS订阅，了解RSS为什么没落</a> </li><li><a href="https://blog.51cto.com/prepared/3130093">程序员如何使用RSS订阅网站更新</a></li></ul><h1 id="5-问题解决"><a href="#5-问题解决" class="headerlink" title="5. 问题解决"></a>5. 问题解决</h1><h2 id="5-1-修改主题后网站不更新"><a href="#5-1-修改主题后网站不更新" class="headerlink" title="5.1. 修改主题后网站不更新"></a>5.1. 修改主题后网站不更新</h2><p>  尝试方法：<br>    1. 删除.deploy_git 和 public 文件夹，再执行hexo clean , hexo g , hexo d。</p><img src="https://cdn.leiyiyun.com/post-img/hb-hexo/hb-hexo-20200214120300489.png" style="zoom: 50%;" /><ol start="2"><li>chrome 浏览器f12开控制台，勾选disable cache。</li></ol><img src="https://cdn.leiyiyun.com/post-img/hb-hexo/hb-hexo-image3.png" style="zoom:50%;" />  <ol start="3"><li>试了以上两种方法都没成功，最后在浏览器清除所有浏览数据后更新成功。</li></ol><h1 id="6-插件推荐"><a href="#6-插件推荐" class="headerlink" title="6. 插件推荐"></a>6. 插件推荐</h1><ul><li><a href="https://github.com/rozbo/hexo-abbrlink">hexo-abbrlink</a>： 为每个页面生成唯一的永久链接</li><li><a href="https://github.com/willin/hexo-wordcount">hexo-wordcount</a>: 字数统计</li></ul><h1 id="7-相关参考"><a href="#7-相关参考" class="headerlink" title="7. 相关参考"></a>7. 相关参考</h1><ul><li><a href="https://www.jianshu.com/p/9f0e90cc32c2">Hexo-NexT配置超炫网页效果</a></li><li><a href="https://blog.csdn.net/qq_39119496/article/details/103372437">Hexo博客的Next主题 7.5版本给首页文章添加阴影</a></li><li><a href="http://blog.runningcoder.me/2017/12/29/create-personal-blog-with-github-and-hexo-extend/">手摸手教你用github和hexo搭建个人博客（番外篇）</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> handbook </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo </tag>
            
            <tag> github pages </tag>
            
            <tag> blog </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
